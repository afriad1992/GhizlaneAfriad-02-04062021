var ATTracking,AdParams,BaseParams,CommonParams,EventAds,PjAds,RequestPjAds,ServerLocalads,myPjAds,reloadIframeLocalAds,extend=function(e,t){for(var n in t)hasProp.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};BaseParams=function(){function e(){}return e.prototype.pjwhat=null,e.prototype.pjwhere=null,e.prototype.pjformat=null,e.prototype.pjnbres=null,e}(),CommonParams=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,BaseParams),t.prototype.pjpartnerkey=null,t.prototype.pjsw=null,t.prototype.pjsh=null,t.prototype.loc=null,t.prototype.pjcontext=null,t.prototype.pjqa=null,t.prototype.oax=null,t}(),AdParams=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,BaseParams),t.prototype.pjid=null,t.prototype.pjpx=null,t.prototype.pjpy=null,t}(),RequestPjAds=function(){function e(e){if(null==e.common)throw"PagesJaunes Localads : Object common is not present";if(null==e.ads)throw"PagesJaunes Localads : Object ads is not present";this.adaptCommonParams(e.common),this.ads=new Array,this.adaptAdsParams(e.ads)}return e.prototype.common=null,e.prototype.ads=null,e.prototype.adaptCommonParams=function(e){var t,n;for(t in this.common=new CommonParams,e)n=e[t],this.common[t]=n;return this.completeCommonParams()},e.prototype.completeCommonParams=function(){return null!==this.common.pjwhat&&""!==this.common.pjwhat||(this.common.pjcontext=window.top.document.title),this.common.pjsw=window.screen.width,this.common.pjsh=window.screen.height,this.common.loc=window.location.href},e.prototype.adaptAdsParams=function(e){var t,n,r,o,a,i;for(r in i=[],e)if(n=e[r],e.hasOwnProperty(r)){if(null==n.pjid)throw"Localads : Le paramètre pjid est manquant";if(!document.getElementById(n.pjid))throw'Localads : La balise "'+n.pjid+'" n\'existe pas. Veuillez ajouter la balise HTML <ins id="'+n.pjid+'"></ins>';for(o in t=new AdParams,n)a=n[o],t[o]=a,t=this.completeAdsParams(t);i.push(this.ads.push(t))}else i.push(void 0);return i},e.prototype.completeAdsParams=function(e){return e.pjpx=document.getElementById(e.pjid).parentNode.offsetLeft,e.pjpy=document.getElementById(e.pjid).parentNode.offsetTop,e},e}(),ATTracking=function(){function e(){}return e.prototype.sendTrackerClick=function(e,t){var n,r,o;if("1"!==(r=new TrackingRequest).isSlmLink(t))return n=r.getPosition(t),o="A",null===e&&(e=r.getLinkType(t),o="S"),xt_click(this,"C","0",pjRep+"::"+pjSRep+"::"+e+"::Position"+n,o)},e}(),ServerLocalads=function(){function e(){}return e.search=function(e,c){var t,n,r,o,a,d,i;for((d=new XMLHttpRequest).onload=function(e){var t,n,r,o,a,i,s,l;if(r=0,3===(o=d.readyState)||4===o){if(l=[200,304],a=d.status,!(0<=indexOf.call(l,a)))return console.log("Error on search...");for(t=n=0,i=(s=document.getElementsByTagName("script")).length;0<=i?n<=i:i<=n;t=0<=i?++n:--n)void 0!==s[t]&&null!==s[t].src.match(/pj_locals\.js/)&&r++;if(1<r)throw"Error : the script is loaded more than once in the page";"function"==typeof c&&c.call(this,d,JSON.parse(d.response))}},n=!0,r=0,o=(a=e.ads).length;r<o;r++)null!=(t=a[r]).pjwhere&&""!==t.pjwhere&&"undefined"!==t.pjwhere&&"null"!==t.pjwhere||(n=!1);return i=null!=e.common.pjwhere&&""!==e.common.pjwhere&&"undefined"!==e.common.pjwhere&&"null"!==e.common.pjwhere||!1!==n?"/adpj-result-multiple/v2/":"/geoip",d.open("POST",this.getHostLocalads()+i,!0),d.onerror=function(e){return console.error(d.statusText)},d.send(JSON.stringify(e))},e.prototype.sendTrackerClick=function(e){var t,n;return t=e.__toArray(),n=document.head.getAttribute("data-base-uri")+"tracker/click?"+XhrBuilder.serializeObject(t),new XhrBuilder("GET",n).send()},e.prototype.sendCloseAdsRequest=function(e){var t,n;return t=e.__toArray(),n=document.head.getAttribute("data-base-uri")+"closeAds?"+XhrBuilder.serializeObject(t),new XhrBuilder("GET",n).send()},e.getHostLocalads=function(){var e,t,n,r;for(r="",n=document.getElementsByTagName("script"),e=0;e<n.length;){if(null!==n[e].src.match(/pj_locals\.js/)||null!==n[e].src.match(/pj_ad\.js/)){(t=document.createElement("a")).href=n[e].src,r=t.protocol+"//"+t.hostname,""!==t.port&&(r=r+":"+t.port);break}e++}return r},e.prototype.sendTrackerSmsButton=function(e){var t,n;return t=e.__toArray(),n=document.head.getAttribute("data-base-uri")+"tracker/btn?"+XhrBuilder.serializeObject(t),new XhrBuilder("GET",n).send()},e.prototype.sendTrackerSwipe=function(e){var t,n;return t=e.__toArray(),n=document.head.getAttribute("data-base-uri")+"tracker/swipe?"+XhrBuilder.serializeObject(t),new XhrBuilder("GET",n).send()},e}(),EventAds=function(){function e(){}return e.prototype.attachMessageIdRequestHandler=function(r,o){var e,a,i,t;return i=this,a=function(e){var t,n;return null===document.getElementById(r)?(n=window.addEventListener?"removeEventListener":"detachEvent",t=window.addEventListener?"scroll":"onscroll",window[n](t,a)):i.isScrolledIntoView(e,r,o)?(n=window.addEventListener?"removeEventListener":"detachEvent",t=window.addEventListener?"scroll":"onscroll",window[n](t,a)):void 0},e=window.addEventListener?"addEventListener":"attachEvent",t=window.addEventListener?"scroll":"onscroll",window[e](t,a),a()},e.prototype.isScrolledIntoView=function(e,t,n){var r,o,a;return r=!1,void 0!==t&&(o=document.getElementById(t).getBoundingClientRect(),a=Math.max(document.documentElement.clientHeight,window.innerHeight),r=!(o.bottom<0||0<=o.top-a)),r},e.logDisplay=function(e,t){var n,r,o,a,i;try{return a=(n=(o=e.contentWindow).getATVars()).baseURI,n.attracker_what=n.attracker_what.replace("&#039;","'"),o.xtnv=document,o.xtsdi=n.taghost+"at.pagesjaunes.fr/wa.pj",o.xtsite=n.tagid,o.xtn2="0",o.xtpage=n.attracker_defpage,o.xtdi="",o.xt_multc="&x1=["+n.attracker_defx1+"]&x2=["+n.attracker_defx2+"]&x3="+n.attracker_format+"&x4="+n.attracker_nbres+"&x5="+n.attracker_what+"&x6="+n.attracker_where+"&x7="+n.attracker_actif+"&x10="+n.requestId,o.xt_an="",o.xt_ac="",r=t.id_lieu,o.xt_stc="{ 'localiterechercheeYESPB': '"+r+"'}",o.currenturl=window.location.href,null!==o.xtparam&&void 0!==o.xtparam?o.xtparam+=o.xt_multc+"&ac="+o.xt_ac+"&an="+o.xt_an+"&stc="+o.xt_stc:o.xtparam=o.xt_multc+"&ac="+o.xt_ac+"&an="+o.xt_an+"&stc="+o.xt_stc,(i=document.createElement("script")).type="text/javascript",i.src=a+"js/xtcore.js",o.document.body.appendChild(i)}catch(e){e}},e}(),reloadIframeLocalAds=function(e){var t,n,r,o;return e.common.pjfromnewsearch=!0,r=e.ads[0].pjid,n=350,null!=(t=document.getElementById(r+"_iframe"))&&(n=t.offsetHeight,t.parentNode.removeChild(t)),null!=(o=document.getElementById(r))&&(o.innerHTML='<div style="background:#FFF;height:'+n+'px;position: relative;"> <img src="https\u003A\/\/sle.pagesjaunes.fr/img/pjflatjaune36x36.png" style="position: absolute;left: 50%;top: 50%;margin-left: -50px;margin-top: -50px;" /><img src="https\u003A\/\/sle.pagesjaunes.fr/img/loader.gif" style="position: absolute;left: 50%;top: 50%;margin-left: -64px;margin-top: -64px;" /><div style="text-decoration:none;text-align: center;vertical-align: middle;line-height: '+(n+25)+'px;margin-right:50px;">Recherche en cours ...</div></div>'),new PjAds(e)},myPjAds=new(PjAds=function(){function e(l){var c;this.requestPjAds=new RequestPjAds(l),c=this,ServerLocalads.search(this.requestPjAds,function(e,t){var n,r,o,a,i,s;for(s in i=[],a=t.ads)n=a[s],void 0!==t.fallback&&void 0!==t.fallback[s]?""!==t.fallback[s]?(r=t.fallback[s],i.push(window[r](s))):i.push(void 0):(o=!1,l.common.pjwithoutresize&&(o=l.common.pjwithoutresize),i.push(c.insertIframe(s,t.common,n,o)));return i})}return e.prototype.requestPjAds=null,e.prototype.imagesSrc=[],e.prototype.imageGoodSizeFolder=null,e.prototype.insertIframe=function(e,t,n,r){var o,a,i,s,l;return i=e+"_iframe",o=this.getIframeElement(i,n),(l=document.getElementById(e)).innerHTML="",l.appendChild(o),a=this.getAdHtml(t,n),void 0!==o.contentDocument?(o.contentDocument.write(a),o.contentDocument.close()):(o.contentWindow.document.write(a),o.contentWindow.document.close()),(new EventAds).attachMessageIdRequestHandler(i,n),s=this,r||window.addEventListener("resize",function(){return o=document.getElementById(i),s.iframeAutoResize(o,n)}),this.iframeAutoResize(o,n),setTimeout(function(){return s.iframeAutoResize(o,n)},120)},e.prototype.getAdHtml=function(e,t){var n;return n=t.context.theme,e.template[n].html.replace("[[HTML_THEME]]",t.html).replace("[[HTML_AT_INTERNET_SCRIPT]]",t.atInternetScript).replace("[[HTML_LOCALADS_SCRIPT]]",t.localadsScript)},e.prototype.getIframeElement=function(e,t){var n;return null===t.context.formatSize&&(t.context.formatSize="100%"),(n=document.createElement("iframe")).name="pj_ads",n.id=e,n.scrolling="no",n.title="D’autres professionels liés",null!=t.context.formatSize&&(n.width=t.context.formatSize),n.height=0,n.frameBorder="no",void 0!==n.style.cssText?n.style.cssText="border: 0":n.style="border: 0;",n},e.prototype.iframeAutoResize=function(e,t){var n,r,o;if(null!==e)return n=e.contentWindow.document.body.clientHeight,e.style.height=n+"px",r=e.parentElement.parentElement.clientWidth,null!=t.context.formatSize&&-1===(o=t.context.formatSize).toString().indexOf("%")&&(o+="px"),null!=t.context.formatSize&&t.context.formatSize>r&&(o="100%"),e.style.width=o,this.resizeImages(t,e)},e.prototype.resizeImages=function(e,t){var n,r,o,a,i,s,l,c,d,u,p,m,h,f,g,y,w;if(c=JSON.parse(e.context.imageSizes),s=JSON.parse(e.context.imageSelectors),c.length&&s.length){for(a=t.clientWidth,w=[],d=0,h=c.length;d<h;d++){for(null==(l=c[d]).minWidth&&(o=l),null!=l.maxWidth&&null!=l.maxWidth&&a>=l.minWidth&&a<=l.maxWidth&&(o=l),null==l.maxWidth&&null!=l.minWidth&&a>=l.minWidth&&(o=l),y=null!=this.imageGoodSizeFolder?this.imageGoodSizeFolder:c[0].folder,u=0,f=s.length;u<f;u++)if(i=s[u],null==this.imagesSrc[i.loadType]&&(this.imagesSrc[i.loadType]=[]),"class"===i.attributeType&&(r=t.contentWindow.document.getElementsByClassName(i.attributeValue)),null!=r)for(p=m=0,g=r.length;m<g;p=++m)n=r[p],null==this.imagesSrc[i.loadType][p]&&("img"===i.loadType?this.imagesSrc[i.loadType][p]=n.src:"css"===i.loadType&&(this.imagesSrc[i.loadType][p]=n.style.backgroundImage)),"img"===i.loadType?n.src=n.src.replace(y,o.folder):"css"===i.loadType&&(n.style.backgroundImage=n.style.backgroundImage.replace(y,o.folder));w.push(this.imageGoodSizeFolder=o.folder)}return w}},e}())(_pjsleads);